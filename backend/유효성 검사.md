## 유효성 검사란?

> 사용자가 입력한 값이 조건에 맞는지 확인하는 과정

근데 유효성검사를 왜 하냐?

만약에 성별이라는 컬럼 안에 크레파스라는 것이 저장되면 잘못된 값이 저장되는 것이기 때문에 db에 잘못된 값이 저장되는 것을 막기 위해 유효성 검사를 한다.

그런 유효성 검사에는 여러 종류가 있는데 그거에 대해서 알아보자

---

## @NotNull

> 말 그대로 해당 필드의 값이 null이면 안되는 것이다.

```java
public class ProductDto {
    @NotNull(message = "가격은 반드시 입력해야 합니다.")
    private Integer price;
}
```

예를 들어 이런 코드가 잇고

```java
{
  "price": null
}
```

이런 요청이 왓으면

응답 → 가격은 반드시 입력해야합니다. 라는 문구가 출력된다.

## @NotBlank

> 문자열이 **null이 아니고**, 공백(" ")도 아닌 **실제 문자**가 있어야 함

```java
public class PostDto {
    @NotBlank(message = "제목은 비어 있을 수 없습니다.")
    private String title;
}
```

이런 코드가 있다고 가정하면

```java
{
  "title": "   "
}
```

이렇게 null이 아닌 공백이 와도

응답 → 제목은 비어있을 수 없습니다. 라는 문구가 나온다.

## @NotEmpty

> 문자열/리스트가 비어있으면 안됨, 하지만 공백은 허용

```java
public class SurveyDto {
    @NotEmpty(message = "하나 이상의 항목을 선택해야 합니다.")
    private List<String> options;
}
```

이런 코드가 있다고 가정하면

```java
{
  "options": []
}
```

이렇게 아무것도 선택하지 않고 보내면

응답 → 하나 이상의 항목을 선택해야합니다. 라는 문구가 나온다.

## @Size(min, max)

> 문자열, 배열, 리스트 등의 길이 제한

```java
public class UserDto {
    @Size(min = 8, max = 20, message = "비밀번호는 8자 이상 20자 이하여야 합니다.")
    private String password;
}
```

이런 코드가 있다고 가정하면

```java
{
  "password": "1234"
}
```

이런 요청이 들어왔을 때 8글자 이상이 되지 않음으로 조건에 걸리니까

응답 → 비밀번호는 8자 이상 20가 이하여야 합니다. 라는 문구가 출력된다.

## @Email

> 이메일의 형태가 유효한지 검사

```java
public class SignupDto {
    @Email(message = "올바른 이메일 형식이 아닙니다.")
    private String email;
}
```

이런 코드가 있다고 가정하면

```java
{
  "email": "hello@"
}
```

이렇게 요청을 보냈다면 이메일의 형식에 맞지 않기 때문에

응답 → 올바른 이메일 형식이 아닙니다. 라는 문구가 나온다.

## @Pattern

> 정규식(Regex)을 통한 형식 검사

이건 코드를 보면서 이해해보자

```java
public class UserDto {
    @Pattern(regexp = "^[0-9]{3}-[0-9]{4}-[0-9]{4}$", message = "전화번호 형식이 올바르지 않습니다.")
    private String phone;
}
```

이런 식으로 개발자가 따로 어떤 특정한 식을 만들어서 필드의 유효성을 검사하는것임

```java
{
  "phone": "01012345678"
}
```

이렇게 하면 - 가 빠져있기 때문에

응답 → 전화번호의 형식이 올바르지 않습니다. 라는 문구가 나온다.

## @Min, @Max

> 최댓값과 최솟값을 지정하는 것이다.

```java
public class UserDto {
    @Min(value = 0, message = "나이는 0 이상이어야 합니다.")
    @Max(value = 120, message = "나이는 120 이하여야 합니다.")
    private Integer age;
}
```

이렇게 필드의 최댓값과 최소값을 지정해서 각각 문구가 뜨도록 하는 것이다.

```java
{
  "age": -3
}
```

이렇게 되면 0보다 작기 때문에

응답 → 나이는 0 이상이여야 합니다.

## @AssertTrue, @AssertFalse

> 값이 반드시 참 또는 거짓이여야 함

```java
public class TermsDto {
    @AssertTrue(message = "약관에 동의해야 합니다.")
    private boolean agree;
}
```

이런 코드가 있을때

```java
{
  "agree": false
}
```

이런 요청이 오면 True어노테이션을 사용하였음으로

응답 → 약관에 동의해야합니다.

라는 문구가 나온다.